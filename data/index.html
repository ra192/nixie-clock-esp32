<!DOCTYPE html>
<html>

<head>
  <title>Pulsar nixie clock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <div class="topnav">
    <h1>Pulsar nixie clock</h1>
  </div>
  <div class="content">
    <div class="card-grid">
      <div class="card">
        <form action="/save-wifi-creds" method="POST">
          <p>
            <label for="ssid">SSID</label>
            <input type="text" id="ssid" name="ssid" /><br />
            <label for="password">Password</label>
            <input type="text" id="password" name="password" /><br />
            <input type="submit" value="Submit" />
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/save-time" method="POST">
          <p>
            <label for="time">Time</label>
            <input type="time" id="time" name="time" /><br />
            <label for="sync_time">Sync time</label>
            <select id="sync_time" name="sync_time">
              <option value="1">on</option>
              <option value="0">off</option>
            </select><br />
            <label for="time_zone">Time zone</label>
            <select id="time_zone" name="time_zone">
              <option value="EET-2EEST,M3.5.0/3,M10.5.0/4">Europe/Kiev</option>
              <option value="GMT0BST,M3.5.0/1,M10.5.0">Europe/London</option>
            </select><br />
            <input type="submit" value="Submit" />
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/save-settings" method="POST">
          <p>
            <label for="nixie_brightness">Nixie brightness</label>
            <input type="number" id="nixie_brightness" name="nixie_brightness" min="63" max="255" /><br />

            <label for="display_mode">Display mode</label>
            <select id="display_mode" name="display_mode">
              <option value="0">Time</option>
              <option value="1">Time and date</option>
              <option value="2">Time, date and temperature</option>
            </select><br />
            <label for="transition_effect">Nixie effect</label>
            <select id="transition_effect" name="transition_effect">
              <option value="0">None</option>
              <option value="1">Shift left</option>
              <option value="2">Shift right</option>
              <option value="3">Flip all</option>
              <option value="4">Flip seq</option>
            </select><br />
            <label for="led_brightness">Led brightness</label>
            <input type="number" id="led_brightness" name="led_brightness" max="255" /><br />
            <label for="led_color">Led color</label>
            <input type="number" id="led_color" name="led_color" /><br />
            <input type="submit" value="Submit" />
          </p>
        </form>
      </div>
    </div>
  </div>
  <script>
    fetch('/get-settings').then(response => response.json()).then(data => {
      document.getElementById('ssid').value = data['ssid'];
      document.getElementById('sync_time').value = data['sync_time'];
      document.getElementById('time_zone').value = data['time_zone'];
      document.getElementById('nixie_brightness').value = data['nixie_brightness'];
      document.getElementById('display_mode').value = data['display_mode'];
      document.getElementById('transition_effect').value = data['transition_effect'];
      document.getElementById('led_brightness').value = data['led_brightness'];
      document.getElementById('led_color').value = data['led_color'];
    });
  </script>
</body>

</html>